<template>
    <main class="pages">
      <div id="layout-groups" class="layout-pages">
        <!-- å¡ç‰‡åˆ—è¡¨ -->
        <div id="card-list" class="page-content">
          <!-- å·¥å…·æ  -->
          <div class="toolbar">
            <div class="toolbar-text-2">
              <span>ğŸ˜Š æ‰€å±åˆ†ç±»</span>
              <div class="category-select-all" aria-label="æ‰€å±åˆ†ç±»">
                <!-- é€‰æ‹©æ¡† -->
                <select id="category-select" @change="handleCategoryChange">
                  <option value="">è¯·é€‰æ‹©</option>
                  <!-- å…¶ä»–é€‰é¡¹æ ¹æ®éœ€è¦æ·»åŠ  -->
                </select>
                <span class="arrow">&#9660;</span>
              </div>
            </div>
            <div>
              <!-- æ·»åŠ æŒ‰é’® -->
              <button class="add-button-card" @click="addCard">æ·»åŠ </button>
              <!-- æ‰¹é‡åˆ é™¤æŒ‰é’® -->
              <button class="multi-delete-button-card" @click="deleteSelectedCards">æ‰¹é‡åˆ é™¤</button>
            </div>
          </div>
          <!-- è¡¨æ ¼ -->
          <table id="myTable-card">
            <thead>
            <tr>
              <th>é€‰æ‹©</th>
              <th>åºå·</th>
              <th>æ‰€å±åˆ†ç±»</th>
              <th>åç§°</th>
              <th>å›¾æ ‡</th>
              <th>é“¾æ¥</th>
              <th>æè¿°</th>
              <th>æ“ä½œ</th>
            </tr>
            </thead>
              <tbody id="tableBody-card">
                <tr v-for="bookmark in itemsArray" :key="bookmark.name">
                <td>
                  <input type="checkbox">
                </td>
                <td></td>
                <td></td>
                <td>{{ bookmark.name }}</td>
                <td>{{ bookmark.icon }}</td>
                <td>{{ bookmark.href }}</td>
                <td>{{ bookmark.description }}</td>
                <td>
                  <button @click="editItem(item)" class="edit-button-card">ç¼–è¾‘</button>
                  <button @click="deleteItem(item)" class="delete-button-card">åˆ é™¤</button>
                </td>
              </tr>
              </tbody>
          </table>
        </div>
      </div>
    </main>

    <!-- æ·»åŠ æ¨¡æ€æ¡† -->
    <div class="modal" id="add_Modal-card" >
      <div class="modal-content"  id="add_modal-content-card">
        <span class="close" id="add_close-card">&times;</span>
        <label>è¯·è¾“å…¥ä½ è¦æ·»åŠ çš„ç½‘é¡µ:</label>
        <CardModal/>
        <button class="saveButton" id="add_saveButton-card">ä¿å­˜</button>
      </div>
    </div>

    <!-- æ·»åŠ æ¨¡æ€æ¡†çš„ä¿å­˜æ¨¡æ€æ¡† -->
    <AddSave/>

  <!-- ç¼–è¾‘æ¨¡æ€æ¡† -->
  <div  class="modal" id="edit_Modal-card">
    <div class="modal-content" id="edit_modal-content-card">
      <span class="close" id="edit_close-card">&times;</span>
        <label>
          è¯·ä¿®æ”¹ä½ è¦ç¼–è¾‘çš„åˆ†ç±»:
        </label>
        <CardModal/>
        <button class="saveButton" id="edit_saveButton">ä¿å­˜</button>
      </div>
    </div>

    <!-- ç¼–è¾‘æ¨¡æ€æ¡†çš„ä¿å­˜æ¨¡æ€æ¡† -->
    <EditSave/>

  <!-- åˆ é™¤æ¨¡æ€æ¡† -->
  <div  class="modal" id="del_Modal-card">
    <div class="modal-content" id="del_modal-content-card">
      <span class="close" id="del_close-card">&times;</span>
      <label>
        ä½ çœŸçš„è¦åˆ é™¤è¿™ä¸ªç½‘é¡µå—ï¼Ÿ
      </label>
      <CardModal/>
      <button class="saveButton" id="del_saveButton-card">ç¡®å®š</button>
    </div>
  </div>

  <!-- åˆ é™¤æ¨¡æ€æ¡†çš„ä¿å­˜æ¨¡æ€æ¡† -->
  <DelSave/>

  <!-- æ‰¹é‡åˆ é™¤åŠä¿å­˜æ¨¡æ€æ¡† -->
  <MultiDelModal/>
  
</template>

<script setup lang="ts" name="TableCard">
  import CardModal from '../components/CardModal.vue'
  import AddSave from '../components/AddSave.vue'
  import EditSave from '../components/EditSave.vue'
  import DelSave from '../components/DelSave.vue'
  import MultiDelModal from '../components/MultiDelModal.vue'
  import { useBookmarks } from '../types/bookmarks.ts';

  const { jsonData, itemsArray } = useBookmarks();

</script>

<style>
  @import '../assets/manage.css';
  @import '../assets/table-card.css';
</style>